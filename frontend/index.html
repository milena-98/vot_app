<!DOCTYPE html>
<html>
<head>
    <title>Microservice App</title>
</head>
<body>
    <h1>Messages</h1>

    <input id="msg" />
    <button onclick="send()">Send</button>

    <ul id="list"></ul>

    <script>
        async function load() {
            const res = await fetch("http://backend:5000/messages");
            const data = await res.json();
            document.getElementById("list").innerHTML =
                data.map(m => `<li>${m[0]}</li>`).join("");
        }

        async function send() {
            const msg = document.getElementById("msg").value;
            await fetch("http://backend:5000/messages", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({content: msg})
            });
            load();
        }

        load();
    </script>
</body>
</html>
